{% extends 'base.html' %}

{% block title %}{{ event.title }}{% endblock %}

{% block content %}
<h2>{{ event.title }}</h2>
<p><strong>Date and Time:</strong> {{ event.date_time }}</p>
<p><strong>Location:</strong> {{ event.location }}</p>
<p><strong>Description:</strong></p>
{{ event.description|safe }}
<p><strong>Organizer:</strong> {{ event.organizer.username }}</p>

<h3>Attendees ({{ attendees.count }}):</h3>
<ul>
    {% for attendee in attendees %}
    <li>{{ attendee.username }}</li>
    {% empty %}
    <li>No attendees yet. Be the first to join!</li>
    {% endfor %}
</ul>

{% if user == event.organizer %}
<a href="{% url 'events:edit_event' event.pk %}">Edit Event</a>
{% endif %}

{% if user.is_authenticated %}
<form method="post">
    {% csrf_token %}
    {% if user in attendees %}
    <button type="submit" name="action" value="unattend">Unattend</button>
    {% else %}
    <button type="submit" name="action" value="attend">Attend</button>
    {% endif %}
</form>
{% endif %}

{% endblock %}
